{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Campers","text":"Local development experience. Remote cloud resources.  <p>Campers is a command-line tool that bridges the gap between your local machine and the cloud. It manages ephemeral AWS instances that feel like <code>localhost</code>.</p> <p> </p>"},{"location":"#why-campers","title":"Why Campers?","text":"<ul> <li>Infinite Compute: Offload heavy compilation (C++/Rust), AI model training, or microservice stacks to high-powered cloud instances.</li> <li>Local Experience: Your code stays on your laptop. You use your own VS Code, Vim, or IDE. Campers syncs changes instantly.</li> <li>Data Compliance: Keep PII and sensitive data in a compliant cloud region without it ever touching your laptop.</li> <li>Cost Control: Instances are disposable. Spin them up for a task, destroy them when done.</li> </ul>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Mutagen Sync: Real-time, bidirectional file synchronization. Unlike <code>rsync</code> or NFS, Mutagen uses a smart forwarding agent that provides local-native latency. You edit files instantly; sync happens in the background (&lt;20ms).</li> <li>Auto-Port Forwarding: Access remote web apps and Jupyter notebooks via <code>localhost</code>.</li> <li>Ansible Provisioning: Configure instances with standard Ansible playbooks.</li> <li>TUI Dashboard: Monitor logs, sync status, and instance health in a beautiful terminal interface.</li> </ul>"},{"location":"#quick-install","title":"Quick Install","text":"<pre><code>pip install campers\n</code></pre> <p>Or run directly without installation using uv:</p> <pre><code>uvx campers run\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started - Zero-to-hero guide</li> <li>Configuration - Full reference for <code>campers.yaml</code></li> <li>Commands - CLI reference</li> <li>Examples - Real-world recipes (Data Science, Web, Systems)</li> </ul>"},{"location":"commands/","title":"Commands","text":"<p>Complete reference for all Campers CLI commands.</p>"},{"location":"commands/#run","title":"run","text":"<p>The primary command. It provisions, syncs, and connects you to the camp.</p> <pre><code>campers run [CAMP_NAME] [OPTIONS]\n</code></pre> <p>Behavior: 1.  Provision: If the instance doesn't exist, it creates it using the configuration (AMI, instance type). 2.  Start: If the instance exists but is stopped, it starts it. 3.  Sync: It establishes the Mutagen file sync session. This runs in the background. 4.  Tunnel: It sets up SSH port forwarding for all ports defined in <code>campers.yml</code>. 5.  Connect: It opens an interactive SSH shell (or runs the specified <code>--command</code>).</p>"},{"location":"commands/#tui-terminal-user-interface","title":"TUI (Terminal User Interface)","text":"<p>By default, <code>run</code> opens a dashboard showing: - Sync Status: Real-time count of files synced. - Logs: Output from startup scripts and provisioning. - Instance Stats: IP address, region, uptime, and cost estimates.</p>"},{"location":"commands/#options","title":"Options","text":"Option Description Rationale <code>CAMP_NAME</code> Name of the camp in <code>campers.yml</code>. Defaults to <code>default</code> if omitted. Allows managing multiple environments (e.g., <code>dev</code>, <code>gpu</code>, <code>test</code>) from one config. <code>-c</code>, <code>--command</code> Command to execute instead of opening a shell. Useful for \"fire and forget\" tasks like <code>campers run training -c \"python train.py\"</code>. <code>--instance-type</code> Override EC2 instance type (e.g., <code>c6a.xlarge</code>). Quickly scale up without editing the config file. <code>--disk-size</code> Override root volume size (GB). Need more space for a specific dataset? Override it here. <code>--region</code> Override AWS region. Deploy closer to your data or where spot prices are lower. <code>--port</code> Additional port(s) to forward. Expose a new service (e.g., debug port) ad-hoc. <code>--ignore</code> Comma-separated patterns to exclude from sync (e.g., <code>\"*.log,node_modules\"</code>). Override config ignore patterns for this run. <code>--plain</code> Disable the TUI and use simple text output. Critical for CI/CD. Use this when running in GitHub Actions or scripts."},{"location":"commands/#list","title":"list","text":"<p>Show instances managed by Campers across all regions.</p> <pre><code>campers list [OPTIONS]\n</code></pre> <p>Default behavior: Shows only your instances (filtered by your git email or username).</p> <p>What it shows: - Name: Instance name derived from project/branch/camp. - Status: Running, Stopped, or Terminated. - Cost: Estimated monthly cost (Compute + Storage). - Region: Where the instance lives.</p>"},{"location":"commands/#options_1","title":"Options","text":"Option Description <code>--all</code> Show all Campers instances (all users). Adds an Owner column. <code>--region</code> Filter to a specific AWS region. <code>--json</code> Output in JSON format for programmatic use."},{"location":"commands/#multi-user-filtering","title":"Multi-User Filtering","text":"<p>By default, <code>campers list</code> shows only instances you own:</p> <pre><code>$ campers list\nInstances for alice@example.com:\nNAME          INSTANCE-ID      STATUS    REGION       COST/MONTH\nmycamp        i-0abc123def     running   us-east-1    $30.37/month\n</code></pre> <p>Use <code>--all</code> to see everyone's instances:</p> <pre><code>$ campers list --all\nNAME          INSTANCE-ID      STATUS    OWNER                REGION       COST/MONTH\nmycamp        i-0abc123def     running   alice@example.com    us-east-1    $30.37/month\nothercamp     i-0def456abc     stopped   bob@example.com      us-west-2    $0.00/month\n</code></pre>"},{"location":"commands/#json-output","title":"JSON Output","text":"<p>The <code>--json</code> flag outputs structured data for scripting:</p> <pre><code>campers list --json | jq '.[] | select(.state == \"running\")'\n</code></pre>"},{"location":"commands/#stop","title":"stop","text":"<p>Stops the instance but preserves the disk.</p> <pre><code>campers stop &lt;NAME_OR_ID&gt; [--region REGION]\n</code></pre> <ul> <li>Accepts: Instance name (e.g., <code>dev</code>) or instance ID (e.g., <code>i-0abc123def456</code>).</li> <li>Cost: You stop paying for EC2 compute (hourly rate). You continue paying for EBS storage (~$0.08/GB/month).</li> <li>Use Case: \"I'm done for the day, but I want to resume exactly where I left off tomorrow.\"</li> <li>Behind the Scenes: Calls AWS <code>StopInstances</code>. The IP address will change upon restart.</li> </ul> <p>Cost Savings: After stopping, Campers shows your savings:</p> <pre><code>Savings: $29.95/month (~95% reduction)\n</code></pre>"},{"location":"commands/#start","title":"start","text":"<p>Starts a previously stopped instance.</p> <pre><code>campers start &lt;NAME_OR_ID&gt; [--region REGION]\n</code></pre> <ul> <li>Accepts: Instance name (e.g., <code>dev</code>) or instance ID (e.g., <code>i-0abc123def456</code>).</li> <li>Use Case: Resuming work on a stopped camp.</li> <li>Note: You usually don't need to run this manually. <code>campers run</code> automatically starts stopped instances.</li> </ul>"},{"location":"commands/#destroy","title":"destroy","text":"<p>Terminates the instance and deletes the disk.</p> <pre><code>campers destroy &lt;NAME_OR_ID&gt; [--region REGION]\n</code></pre> <ul> <li>Accepts: Instance name (e.g., <code>dev</code>) or instance ID (e.g., <code>i-0abc123def456</code>).</li> <li>Cost: All billing stops immediately.</li> <li>Use Case: \"Task complete. I don't need this environment or its data anymore.\"</li> <li>Safety: It asks for confirmation unless you pass <code>--force</code>.</li> </ul>"},{"location":"commands/#exec","title":"exec","text":"<p>Execute a command on a running instance without going through the full <code>campers run</code> lifecycle.</p> <pre><code>campers exec &lt;CAMP_OR_INSTANCE&gt; &lt;COMMAND&gt; [OPTIONS]\n</code></pre> <p>Behavior:</p> <p>Think of it like <code>docker exec</code>. When you have a camp running (via <code>campers run</code> in another terminal), you can open additional shells or run one-off commands without syncing files or re-provisioning.</p> <ul> <li>Fast Path: If <code>campers run</code> is active for this camp, exec uses cached connection info (~instant).</li> <li>Slow Path: If no active session, exec discovers the instance via AWS API (~2-5 seconds).</li> </ul>"},{"location":"commands/#options_2","title":"Options","text":"Option Description <code>-it</code> Interactive mode with TTY allocation (like <code>docker exec -it</code>). <code>-i</code>, <code>--interactive</code> Keep stdin open for interactive input. <code>-t</code>, <code>--tty</code> Allocate a pseudo-terminal. <code>--region</code> Narrow AWS discovery to a specific region."},{"location":"commands/#examples","title":"Examples","text":"<p>Run a one-off command:</p> <pre><code>campers exec dev \"ls -la\"\ncampers exec dev \"python --version\"\n</code></pre> <p>Open an interactive shell:</p> <pre><code>campers exec dev \"/bin/bash\" -it\n</code></pre> <p>Debug a running process:</p> <pre><code>campers exec dev \"htop\" -it\ncampers exec dev \"tail -f /var/log/app.log\"\n</code></pre> <p>Use instance ID directly:</p> <pre><code>campers exec i-0abc123def456 \"whoami\"\n</code></pre>"},{"location":"commands/#use-cases","title":"Use Cases","text":"<ul> <li>Quick debugging: Check logs, inspect files, or run diagnostics without interrupting your main session.</li> <li>Multiple terminals: Open several shells to the same instance (one for logs, one for editing, one for running commands).</li> <li>One-off commands: Run a quick script or check status without the overhead of full provisioning.</li> </ul>"},{"location":"commands/#exit-codes","title":"Exit Codes","text":"<p>The exit code from the remote command is propagated. If you run <code>campers exec dev \"exit 42\"</code>, campers exits with code 42.</p>"},{"location":"commands/#init","title":"init","text":"<p>Creates a <code>campers.yaml</code> starter file in the current directory.</p> <pre><code>campers init\n</code></pre> <ul> <li>Rationale: Gets you started with best-practice defaults (git ignore patterns, sensible instance types).</li> </ul>"},{"location":"commands/#doctor","title":"doctor","text":"<p>Diagnose common issues.</p> <pre><code>campers doctor\n</code></pre> <p>Checks: 1.  AWS Credentials: Can we talk to the AWS API? 2.  IAM Permissions: Do we have rights to create instances/VPCs? 3.  Mutagen: Is the sync tool installed and reachable? 4.  Network: Can we reach the AWS endpoints?</p> <ul> <li>Use Case: Run this first if <code>campers run</code> is failing mysteriously.</li> </ul>"},{"location":"commands/#setup","title":"setup","text":"<p>One-time setup helper for AWS account prerequisites.</p> <pre><code>campers setup --region us-east-1\n</code></pre> <p>What it does: 1.  Creates a Default VPC if one is missing (Campers requires a VPC). 2.  Creates/Verifies the Security Group allowing SSH access.</p> <ul> <li>Rationale: Campers tries to be \"zero-config,\" but AWS accounts (especially new ones) might lack basic networking. This command fixes that.</li> </ul>"},{"location":"commands/#validate","title":"validate","text":"<p>Validate your configuration file without running anything.</p> <pre><code>campers validate [CAMP_NAME]\n</code></pre> <p>Behavior:</p> <ul> <li>Without <code>CAMP_NAME</code>: Validates all camps in the config file.</li> <li>With <code>CAMP_NAME</code>: Validates only the specified camp.</li> </ul> <p>Use Cases:</p> <ul> <li>CI/CD: Check config validity before deployment.</li> <li>Debugging: Verify configuration changes before running.</li> </ul> <p>Example:</p> <pre><code>$ campers validate\n\u2713 Configuration valid\n  Camps: dev, gpu, training\n</code></pre> <pre><code>$ campers validate dev\n\u2713 Camp 'dev' configuration valid\n</code></pre> <ul> <li>Exit Codes: Returns <code>0</code> on success, <code>2</code> on configuration error.</li> </ul>"},{"location":"commands/#info","title":"info","text":"<p>Display detailed information about a specific instance.</p> <pre><code>campers info &lt;NAME_OR_ID&gt; [--region REGION]\n</code></pre> <p>Accepts: Instance name (e.g., <code>dev</code>) or instance ID (e.g., <code>i-0abc123def456</code>).</p> <p>What it shows:</p> <ul> <li>Instance ID, state, type, and region</li> <li>Launch time and uptime</li> <li>Key file path for SSH access</li> <li>Public ports with access URLs</li> </ul> <p>Example:</p> <pre><code>$ campers info dev\nInstance:    i-0abc123def456\nState:       running\nType:        t3.medium\nRegion:      us-east-1\nLaunched:    2024-01-15 10:30:00\nUptime:      2h 15m\nKey File:    ~/.campers/keys/abc123.pem\n\nPublic Ports:\n  http://1.2.3.4:8888\n  https://1.2.3.4:443\n</code></pre> <ul> <li>Use Case: Quick reference for SSH access or sharing URLs with teammates.</li> </ul>"},{"location":"commands/#global-options","title":"Global Options","text":"<p>These options apply to most commands (especially <code>run</code>).</p> Option Description <code>-v</code>, <code>--verbose</code> Enable verbose logging. Crucial for debugging provisioning scripts or connection issues. <code>--plain</code> Disable the TUI and use simple text output (ideal for CI/CD pipelines)."},{"location":"commands/#exit-codes_1","title":"Exit Codes","text":"Code Meaning <code>0</code> Success. <code>1</code> General error (AWS API failure, Network issue). <code>2</code> Configuration error (<code>campers.yml</code> is invalid). <code>130</code> User interrupted (Ctrl+C)."},{"location":"commands/#troubleshooting","title":"Troubleshooting","text":""},{"location":"commands/#no-default-vpc","title":"No Default VPC","text":"<pre><code>No default VPC in us-east-1\n</code></pre> <p>Fix: Run <code>campers setup</code> to create a default VPC, or manually:</p> <pre><code>aws ec2 create-default-vpc --region us-east-1\n</code></pre>"},{"location":"commands/#invalid-instance-type","title":"Invalid Instance Type","text":"<pre><code>Invalid instance type\n</code></pre> <p>Causes:</p> <ul> <li>Instance type not available in this region</li> <li>Typo in instance type name</li> </ul> <p>Fix: Check available instance types for your region or try a different region:</p> <pre><code>campers run dev --instance-type t3.medium\ncampers run dev --region us-west-2\n</code></pre>"},{"location":"commands/#insufficient-iam-permissions","title":"Insufficient IAM Permissions","text":"<pre><code>Insufficient IAM permissions\n</code></pre> <p>Required permissions:</p> <ul> <li>Compute: <code>DescribeInstances</code>, <code>RunInstances</code>, <code>TerminateInstances</code>, <code>StartInstances</code>, <code>StopInstances</code></li> <li>VPC: <code>DescribeVpcs</code>, <code>CreateDefaultVpc</code></li> <li>Key Pairs: <code>CreateKeyPair</code>, <code>DeleteKeyPair</code>, <code>DescribeKeyPairs</code></li> <li>Security Groups: <code>CreateSecurityGroup</code>, <code>AuthorizeSecurityGroupIngress</code>, <code>DescribeSecurityGroups</code></li> </ul>"},{"location":"commands/#instance-quota-exceeded","title":"Instance Quota Exceeded","text":"<pre><code>Instance quota exceeded\n</code></pre> <p>Fix: Request a quota increase in the AWS console:</p> <p>AWS Service Quotas Console</p> <p>Or terminate unused instances:</p> <pre><code>campers list --all\ncampers destroy &lt;unused-instance&gt;\n</code></pre>"},{"location":"commands/#expired-credentials","title":"Expired Credentials","text":"<pre><code>Cloud credentials have expired\n</code></pre> <p>Fix:</p> <pre><code>aws sso login           # If using AWS SSO\naws configure           # Re-configure credentials\n</code></pre>"},{"location":"commands/#ssh-connectivity-issues","title":"SSH Connectivity Issues","text":"<p>If you can't connect to your instance:</p> <ol> <li>Check instance state: Is it running? Use <code>campers info &lt;name&gt;</code>.</li> <li>Check security group: SSH port 22 must be open.</li> <li>Wait for startup: New instances take 1-2 minutes to initialize.</li> <li>Network issues: Try a different region or check your firewall.</li> </ol> <p>Debug with verbose mode:</p> <pre><code>campers run dev -v\n</code></pre>"},{"location":"configuration/","title":"Configuration","text":"<p>Campers uses a YAML configuration file (<code>campers.yaml</code>) with four main sections: variables, playbooks, defaults, and camps.</p>"},{"location":"configuration/#file-location","title":"File Location","text":"<p>By default, Campers looks for <code>campers.yaml</code> in the current directory. Override with:</p> <pre><code>export CAMPERS_CONFIG=/path/to/config.yaml\n</code></pre>"},{"location":"configuration/#structure-overview","title":"Structure Overview","text":"<pre><code># 1. Variables (DRY configuration)\nvars:\n  project_name: my-app\n\n# 2. Ansible Playbooks (Provisioning)\nplaybooks:\n  base-setup: ...\n\n# 3. Defaults (Global settings)\ndefaults:\n  region: us-east-1\n\n# 4. Camps (Machine definitions)\ncamps:\n  dev: ...\n  prod: ...\n</code></pre>"},{"location":"configuration/#variables-vars","title":"Variables (<code>vars</code>)","text":"<p>Define reusable values that can be referenced anywhere using <code>${var_name}</code>. This is great for paths and project names.</p> <pre><code>vars:\n  project: my-ml-project\n  remote_dir: /home/ubuntu/${project}\n  python_version: \"3.12\"\n</code></pre>"},{"location":"configuration/#variable-interpolation","title":"Variable Interpolation","text":"<p>Reference other variables using <code>${var_name}</code> syntax. Variables are resolved recursively, so you can build complex paths from simple components:</p> <pre><code>vars:\n  user: ubuntu\n  project: my-app\n  base_dir: /home/${user}\n  remote_dir: ${base_dir}/${project}\n  data_dir: ${remote_dir}/data\n  logs_dir: ${remote_dir}/logs\n</code></pre> <p>With this configuration:</p> <ul> <li><code>${remote_dir}</code> resolves to <code>/home/ubuntu/my-app</code></li> <li><code>${data_dir}</code> resolves to <code>/home/ubuntu/my-app/data</code></li> </ul>"},{"location":"configuration/#environment-variables","title":"Environment Variables","text":"<p>Access your local environment variables using <code>${oc.env:VAR_NAME}</code>:</p> <pre><code>vars:\n  home: ${oc.env:HOME}\n  user: ${oc.env:USER}\n  project_root: ${oc.env:HOME}/projects/${project}\n</code></pre> <p>With default values: If an environment variable might not be set, provide a fallback:</p> <pre><code>vars:\n  api_endpoint: ${oc.env:API_URL,https://api.example.com}\n  log_level: ${oc.env:LOG_LEVEL,INFO}\n  cache_dir: ${oc.env:XDG_CACHE_HOME,~/.cache}/campers\n</code></pre> <p>The value after the comma is used when the environment variable is not set.</p>"},{"location":"configuration/#using-env-files","title":"Using <code>.env</code> Files","text":"<p>Campers automatically loads a <code>.env</code> file from the same directory as your <code>campers.yaml</code> if one exists. This is useful for storing secrets and environment-specific values outside of version control.</p> <p>Example <code>.env</code> file: <pre><code># .env (add to .gitignore!)\nDB_PASSWORD=mysecretpassword\nAPI_KEY=sk-1234567890\nAWS_REGION=us-west-2\n</code></pre></p> <p>Reference in <code>campers.yaml</code>: <pre><code>vars:\n  db_password: ${oc.env:DB_PASSWORD}\n  api_key: ${oc.env:API_KEY}\n  region: ${oc.env:AWS_REGION,us-east-1}\n\ndefaults:\n  region: ${region}\n  env_filter:\n    - ^DB_PASSWORD$\n    - ^API_KEY$\n</code></pre></p> <p>Important notes:</p> <ul> <li><code>.env</code> is loaded before config parsing, so all variables are available via <code>${oc.env:VAR}</code></li> <li>Existing environment variables are NOT overwritten (shell takes precedence)</li> <li>Add <code>.env</code> to your <code>.gitignore</code> to avoid committing secrets</li> </ul>"},{"location":"configuration/#common-patterns","title":"Common Patterns","text":"<p>Project-relative paths: <pre><code>vars:\n  project: my-ml-project\n  remote_dir: /home/ubuntu/${project}\n\ncamps:\n  dev:\n    command: cd ${remote_dir} &amp;&amp; bash\n    startup_script: |\n      cd ${remote_dir}\n      source .venv/bin/activate\n</code></pre></p> <p>Environment-aware configuration: <pre><code>vars:\n  env: ${oc.env:CAMPERS_ENV,development}\n  region: ${oc.env:AWS_REGION,us-east-1}\n\ndefaults:\n  region: ${region}\n</code></pre></p> <p>Combining variables and environment: <pre><code>vars:\n  workspace: ${oc.env:HOME}/projects/${project}\n  data_bucket: ${oc.env:DATA_BUCKET,my-default-bucket}\n\ncamps:\n  training:\n    startup_script: |\n      aws s3 sync s3://${data_bucket}/data ${workspace}/data\n</code></pre></p>"},{"location":"configuration/#playbooks-playbooks","title":"Playbooks (<code>playbooks</code>)","text":"<p>Ansible playbooks for provisioning instances. Define them once, reuse them across camps.</p> <p>Why Ansible? It's idempotent. You can run it 100 times, and it only changes what's necessary.</p> <pre><code>playbooks:\n  # A simple playbook to install tools\n  base:\n    - name: Base system setup\n      hosts: all\n      become: true\n      tasks:\n        - name: Install packages\n          apt: {name: [git, htop, tmux, curl], state: present}\n\n  # A playbook for Python dev\n  python-dev:\n    - name: Python environment\n      hosts: all\n      tasks:\n        - name: Install uv\n          shell: curl -LsSf https://astral.sh/uv/install.sh | sh\n          args:\n            creates: ~/.local/bin/uv\n</code></pre>"},{"location":"configuration/#defaults-defaults","title":"Defaults (<code>defaults</code>)","text":"<p>Base settings inherited by all camps. Useful for setting a common region or SSH user.</p> <pre><code>defaults:\n  region: us-east-1\n  instance_type: t3.medium\n  disk_size: 50\n  ssh_username: ubuntu\n\n  # Sync current directory to remote directory\n  sync_paths:\n    - local: .\n      remote: /home/ubuntu/${project}\n\n  # Don't sync these local files\n  ignore:\n    - \"*.pyc\"\n    - __pycache__\n    - .venv/\n    - .git/\n</code></pre>"},{"location":"configuration/#camps-camps","title":"Camps (<code>camps</code>)","text":"<p>Named configurations that override defaults. Each key under <code>camps</code> is a valid argument for <code>campers run &lt;NAME&gt;</code>.</p> <pre><code>camps:\n  # Simple dev machine\n  dev:\n    instance_type: t3.large\n    command: bash\n\n  # GPU machine for experiments\n  experiment:\n    instance_type: g5.xlarge\n    ami:\n      query:\n        name: \"Deep Learning Base AMI (Ubuntu*)*\"\n        owner: \"amazon\"\n    ports: [8888]\n    command: jupyter lab --ip=0.0.0.0 --port=8888\n</code></pre>"},{"location":"configuration/#settings-reference","title":"Settings Reference","text":""},{"location":"configuration/#ami-selection-ami","title":"AMI Selection (<code>ami</code>)","text":"<p>You can specify an exact AMI ID or a dynamic query to find the latest one.</p> <p>Option 1: Dynamic Query (Recommended) Finds the latest image matching the name pattern. <pre><code>ami:\n  query:\n    name: \"Deep Learning Base AMI (Ubuntu*)*\"\n    owner: \"amazon\"\n    architecture: \"x86_64\" # or arm64\n</code></pre></p> <p>Option 2: Exact ID Pins the instance to a specific image. <pre><code>ami:\n  image_id: ami-0123456789abcdef0\n</code></pre></p>"},{"location":"configuration/#ssh-configuration-ssh_username","title":"SSH Configuration (<code>ssh_username</code>)","text":"<p>By default, Campers assumes an Ubuntu AMI (<code>ssh_username: ubuntu</code>). If you use Amazon Linux or another distro, you must set the correct user.</p> <pre><code>camps:\n  amazon-linux:\n    ssh_username: ec2-user\n    ami:\n      query: {name: \"al2023-ami-*\", owner: \"amazon\"}\n</code></pre> <p>Username restrictions:</p> <ul> <li>Must start with a lowercase letter or underscore</li> <li>Can contain: lowercase letters, numbers, underscores, hyphens</li> <li>Maximum 32 characters</li> <li>Common valid values: <code>ubuntu</code>, <code>ec2-user</code>, <code>admin</code>, <code>centos</code></li> </ul>"},{"location":"configuration/#network-security-ssh_allowed_cidr","title":"Network Security (<code>ssh_allowed_cidr</code>)","text":"<p>By default, Campers opens SSH (port 22) to the world (<code>0.0.0.0/0</code>). You can restrict this to a specific IP range for better security.</p> <pre><code>defaults:\n  # Only allow SSH from my corporate VPN\n  ssh_allowed_cidr: \"203.0.113.0/24\"\n</code></pre>"},{"location":"configuration/#lifecycle-scripts","title":"Lifecycle Scripts","text":"<p>Campers has three distinct phases for running code:</p> <ol> <li> <p>Provisioning (<code>ansible_playbooks</code> or <code>ansible_playbook</code>):</p> <ul> <li>When: Runs on first boot (and on subsequent runs).</li> <li>Purpose: Installing system packages (apt, yum), drivers (CUDA), and global tools.</li> <li>Tool: Ansible.</li> <li>Note: Use <code>ansible_playbooks: [name1, name2]</code> for multiple playbooks, or <code>ansible_playbook: name</code> for a single playbook. These are mutually exclusive.</li> </ul> </li> <li> <p>One-time Setup (<code>setup_script</code>):</p> <ul> <li>When: Runs only once when the instance is first created.</li> <li>Purpose: Cloning repos, simple pip installs (if not using Ansible).</li> <li>Tool: Shell script.</li> </ul> </li> <li> <p>Startup (<code>startup_script</code>):</p> <ul> <li>When: Runs every time you run <code>campers run</code>.</li> <li>Purpose: Fetching latest data (DVC), activating venvs, setting env vars.</li> <li>Tool: Shell script.</li> </ul> </li> </ol> <pre><code>camps:\n  training:\n    # 1. Install system deps\n    ansible_playbooks: [python-setup]\n\n    # 2. Pull latest data (every run)\n    startup_script: |\n      cd ${remote_dir}\n      dvc pull data/\n      source .venv/bin/activate\n\n    # 3. Run the job\n    command: python train.py\n</code></pre>"},{"location":"configuration/#environment-forwarding-env_filter","title":"Environment Forwarding (<code>env_filter</code>)","text":"<p>By default, Campers does not forward your local environment variables to the remote instance for security. You must explicitly allow them using regex patterns.</p> <pre><code>defaults:\n  env_filter:\n    - ^AWS_.*       # Forward all AWS_ACCESS_KEY_...\n    - ^HF_TOKEN$    # Forward specific token\n    - ^WANDB_.*     # Forward Weights &amp; Biases keys\n</code></pre>"},{"location":"configuration/#file-synchronization-sync_paths","title":"File Synchronization (<code>sync_paths</code>)","text":"<p>Campers uses Mutagen for high-performance, bi-directional sync.</p> Setting Description <code>sync_paths</code> List of <code>local</code> and <code>remote</code> pairs. <code>ignore</code> List of file patterns to exclude (like <code>.git</code>, <code>node_modules</code>). <code>include_vcs</code> Boolean. Set to <code>true</code> to sync <code>.git</code> folder (default <code>false</code>). <pre><code>sync_paths:\n  - local: .\n    remote: /home/ubuntu/project\n</code></pre> <p>Default ignore patterns: These are always excluded unless you override them:</p> <ul> <li><code>*.pyc</code></li> <li><code>__pycache__</code></li> <li><code>*.log</code></li> <li><code>.DS_Store</code></li> </ul> <p>Per-path ignore patterns: You can specify custom ignore patterns for individual sync paths:</p> <pre><code>sync_paths:\n  - local: .\n    remote: /home/ubuntu/project\n  - local: ~/.aws\n    remote: /home/ubuntu/.aws\n    ignore:\n      - \"cli/cache\"\n</code></pre>"},{"location":"configuration/#port-forwarding-ports","title":"Port Forwarding (<code>ports</code>)","text":"<p>Automatically tunnels remote ports to <code>localhost</code> via SSH. This is ideal for development - services appear on your local machine.</p> <pre><code>ports:\n  - 8888   # Jupyter \u2192 localhost:8888\n  - 6006   # TensorBoard \u2192 localhost:6006\n  - 5432   # PostgreSQL \u2192 localhost:5432\n</code></pre> <p>Port mapping syntax: Use <code>\"remote:local\"</code> to map to a different local port:</p> <pre><code>ports:\n  - 8888           # Same port: remote:8888 \u2192 local:8888\n  - \"8080:80\"      # Different ports: remote:8080 \u2192 local:80\n  - \"6006:6007\"    # Remote 6006 to local 6007\n</code></pre> <p>Valid port range: 1-65535. Ports below 1024 may require elevated privileges.</p>"},{"location":"configuration/#public-ports-public_ports","title":"Public Ports (<code>public_ports</code>)","text":"<p>Opens ports directly on the instance's public IP for external access. This is ideal for client demos where others need to access your running application.</p> <pre><code>camps:\n  demo:\n    instance_type: t3.medium\n    public_ports: [80, 443, 3000]\n    command: npm start\n</code></pre> <p>With this configuration, clients can access your app at <code>http://&lt;public-ip&gt;:3000</code>.</p> <p>Security Note: By default, public ports are open to the internet (<code>0.0.0.0/0</code>). You can restrict access to specific IP ranges:</p> <pre><code>defaults:\n  public_ports_allowed_cidr: \"203.0.113.0/24\"  # Only your office IP\n</code></pre> Setting Purpose <code>ports</code> SSH tunneling to localhost (developer access) <code>public_ports</code> Security group rules (external/client access)"},{"location":"configuration/#session-exit","title":"Session Exit","text":"<p>When you exit a <code>campers run</code> session (Q or Ctrl+C), you'll be prompted to choose:</p> <ul> <li>Stop (default): Instance is stopped. Disk is preserved. You pay for storage only.</li> <li>Keep running: Disconnect locally but keep the instance running. Useful for demos where clients still need access.</li> <li>Destroy: Terminate the instance and delete all data. You pay nothing.</li> </ul> <p>This interactive prompt replaces the need for pre-configured exit behavior.</p>"},{"location":"configuration/#environment-variables_1","title":"Environment Variables","text":"<p>Campers respects several environment variables for configuration and debugging.</p>"},{"location":"configuration/#configuration_1","title":"Configuration","text":"Variable Description Default <code>CAMPERS_CONFIG</code> Path to config file <code>campers.yaml</code> <code>CAMPERS_DIR</code> Directory for keys and state <code>~/.campers</code> <code>CAMPERS_DEBUG</code> Enable debug mode (shows stack traces) <code>0</code>"},{"location":"configuration/#ssh","title":"SSH","text":"Variable Description Default <code>CAMPERS_SSH_TIMEOUT</code> SSH operation timeout in seconds <code>30</code> <code>CAMPERS_STRICT_HOST_KEY</code> Enforce strict host key checking <code>0</code>"},{"location":"configuration/#feature-toggles","title":"Feature Toggles","text":"Variable Description Default <code>CAMPERS_DISABLE_MUTAGEN</code> Disable file sync entirely <code>0</code> <p>Example usage:</p> <pre><code>CAMPERS_DEBUG=1 campers run dev\nCAMPERS_CONFIG=~/configs/work.yaml campers list\n</code></pre>"},{"location":"configuration/#multi-user-support","title":"Multi-User Support","text":"<p>When multiple developers share an AWS account, Campers automatically isolates instances by user.</p>"},{"location":"configuration/#how-it-works","title":"How It Works","text":"<ol> <li>Owner tagging: Each instance is tagged with an <code>Owner</code> tag containing your identity.</li> <li>Identity detection: Campers uses your git email (<code>git config user.email</code>), falling back to <code>$USER</code> if not set.</li> <li>Filtered listing: <code>campers list</code> shows only your instances by default.</li> </ol>"},{"location":"configuration/#commands","title":"Commands","text":"<pre><code>campers list          # Shows only your instances\ncampers list --all    # Shows all instances with Owner column\n</code></pre>"},{"location":"configuration/#legacy-instances","title":"Legacy Instances","text":"<p>Instances created before multi-user support (without an <code>Owner</code> tag):</p> <ul> <li>Do NOT appear in default <code>campers list</code> output</li> <li>Appear when using <code>--all</code> flag with owner shown as \"unknown\"</li> </ul>"},{"location":"configuration/#instance-naming","title":"Instance Naming","text":"<p>Campers automatically generates instance names based on your project context.</p>"},{"location":"configuration/#naming-strategy","title":"Naming Strategy","text":"<pre><code>campers-{project}-{branch}-{camp_name}\n</code></pre> <p>Example: <code>campers-myapp-feature-login-dev</code></p>"},{"location":"configuration/#auto-detection","title":"Auto-Detection","text":"<p>Campers automatically detects:</p> <ul> <li>Project name: From git remote URL (e.g., <code>github.com/user/myapp</code> \u2192 <code>myapp</code>)</li> <li>Branch name: Current git branch (e.g., <code>feature/login</code> \u2192 <code>feature-login</code>)</li> <li>Camp name: From your command (e.g., <code>campers run dev</code> \u2192 <code>dev</code>)</li> </ul> <p>Fallback: If not in a git repository, uses the current directory name.</p>"},{"location":"configuration/#name-truncation","title":"Name Truncation","text":"<p>Names are automatically truncated to fit AWS tag limits (256 characters).</p>"},{"location":"examples/","title":"Examples","text":"<p>Real-world configuration recipes for common use cases.</p>"},{"location":"examples/#data-residency-pii-compliance","title":"Data Residency &amp; PII Compliance","text":"<p>This pattern is essential for teams working with sensitive data (PII, PHI) that cannot leave a specific geographic region. By provisioning the workstation in the same region as the data, you ensure compliance because the data never touches your local laptop.</p> <pre><code>vars:\n  project: sensitive-analysis\n  remote_dir: /home/ubuntu/${project}\n\ndefaults:\n  # STRICTLY enforce the region where data resides\n  region: eu-central-1  # Frankfurt (GDPR strict)\n\n  # Filter out all environment variables to prevent accidental leakage\n  # Only allow specific, safe variables\n  env_filter:\n    - ^SAFE_VAR_.*\n\ncamps:\n  secure-workstation:\n    instance_type: m5.2xlarge\n    disk_size: 100\n\n    command: |\n      echo \"Connected to secure workstation in eu-central-1.\"\n      echo \"Data analysis can proceed without downloading PII.\"\n      bash\n</code></pre>"},{"location":"examples/#data-science-jupyter-gpu","title":"Data Science (Jupyter + GPU)","text":"<p>A complete setup for deep learning. This camp spins up a GPU instance, installs PyTorch, and forwards Jupyter Lab to your local browser.</p> <pre><code>vars:\n  project: deep-learning\n  remote_dir: /home/ubuntu/${project}\n\nplaybooks:\n  gpu-setup:\n    - name: Install Drivers\n      hosts: all\n      become: true\n      tasks:\n        - name: Install CUDA\n          apt: {name: nvidia-cuda-toolkit, state: present}\n        - name: Install PyTorch\n          pip: {name: [torch, torchvision, jupyterlab, tensorboard]}\n\ncamps:\n  experiment:\n    instance_type: g5.xlarge  # NVIDIA A10G\n    region: us-west-2\n    disk_size: 200\n\n    # Forward Jupyter (8888)\n    ports: [8888]\n\n    ansible_playbooks: [gpu-setup]\n\n    # Auto-start Jupyter\n    command: jupyter lab --ip=0.0.0.0 --port=8888 --no-browser --allow-root\n\n  training:\n    instance_type: p3.2xlarge # V100 GPU\n    region: us-west-2\n    ports: [6006] # TensorBoard\n    ansible_playbooks: [gpu-setup]\n\n    # Pull data on every start\n    startup_script: |\n      cd ${remote_dir}\n      dvc pull data/\n\n    # Run background monitoring + training\n    command: |\n      tensorboard --logdir logs --port 6006 &amp;\n      python train_model.py\n</code></pre> <p>Workflow: 1. Run <code>campers run experiment</code> for interactive work. 2. Run <code>campers run training</code> for heavy batch jobs.</p>"},{"location":"examples/#heavy-compilation-rustc","title":"Heavy Compilation (Rust/C++)","text":"<p>Offload long compile times to a high-core CPU instance.</p> <pre><code>vars:\n  project: rust-engine\n  remote_dir: /home/ubuntu/${project}\n\ncamps:\n  builder:\n    instance_type: c6a.12xlarge  # 48 vCPUs!\n    disk_size: 50\n\n    setup_script: |\n      curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y\n      sudo apt-get install -y build-essential clang\n\n    command: cargo build --release\n</code></pre> <p>When the build completes, you'll be prompted to stop or destroy the instance.</p>"},{"location":"examples/#web-development-full-control","title":"Web Development (Full Control)","text":"<p>Run a backend, frontend, and database in the cloud using Docker Compose. This gives you full control over the environment.</p> <pre><code>camps:\n  webapp:\n    instance_type: t3.medium\n\n    # Forward Frontend, API, and DB admin ports\n    ports:\n      - 3000  # React\n      - 8000  # FastAPI\n      - 5432  # Postgres\n\n    setup_script: |\n      # Install Docker &amp; Compose\n      curl -fsSL https://get.docker.com | sh\n      sudo usermod -aG docker ubuntu\n\n    command: docker compose up\n</code></pre>"},{"location":"examples/#client-demos","title":"Client Demos","text":"<p>Share your running application with clients by exposing ports publicly. Unlike <code>ports</code> (which tunnels to localhost), <code>public_ports</code> opens security group rules so anyone can access the instance's public IP.</p> <pre><code>vars:\n  project: client-demo\n  remote_dir: /home/ubuntu/${project}\n\ncamps:\n  demo:\n    instance_type: t3.medium\n\n    # Public access for clients\n    public_ports: [80, 3000]\n\n    # Also tunnel to localhost for your own dev access\n    ports: [3000]\n\n    setup_script: |\n      curl -fsSL https://get.docker.com | sh\n      sudo usermod -aG docker ubuntu\n\n    command: docker compose up\n</code></pre> <p>Workflow:</p> <ol> <li>Run <code>campers run demo</code> to start the instance.</li> <li>Share the public URL with your client: <code>http://&lt;public-ip&gt;:3000</code></li> <li>When finished, press Q and select Keep running to disconnect while preserving client access.</li> <li>Later, run <code>campers stop demo</code> or <code>campers destroy demo</code> to clean up.</li> </ol> <p>HTTPS for Demos:</p> <p>For production-quality demos with SSL, you can use Caddy as a reverse proxy. Caddy auto-provisions Let's Encrypt certificates.</p> <pre><code>playbooks:\n  caddy-proxy:\n    - name: Setup Caddy\n      hosts: all\n      become: true\n      tasks:\n        - apt: {name: caddy, state: present, update_cache: true}\n        - copy:\n            dest: /etc/caddy/Caddyfile\n            content: |\n              {{ public_ip | replace('.', '-') }}.sslip.io {\n                reverse_proxy localhost:3000\n              }\n          notify: Reload Caddy\n      handlers:\n        - name: Reload Caddy\n          systemd: {name: caddy, state: reloaded}\n\ncamps:\n  demo-https:\n    instance_type: t3.medium\n    public_ports: [80, 443]\n    ansible_playbooks: [caddy-proxy]\n    command: npm start\n</code></pre> <p>This gives you a shareable HTTPS URL like <code>https://54-123-45-67.sslip.io</code> with a valid certificate.</p>"},{"location":"examples/#advanced-aws-profile-support","title":"Advanced: AWS Profile Support","text":"<p>If you rely on <code>AWS_PROFILE</code> (switching between accounts/roles) instead of raw environment variables, you can sync your credentials file to the remote instance.</p> <p>Security Implication</p> <p>This copies your entire <code>~/.aws</code> directory (all profiles) to the cloud instance.</p> <p>While Campers instances are secured by SSH keys and strictly limited security groups (no open ports), if the instance is compromised, all your local profiles are exposed. Only use this if you trust the environment.</p> <pre><code>defaults:\n  env_filter:\n    # Forward the profile name env var\n    - AWS_PROFILE\n\n  sync_paths:\n    # 1. Sync your code\n    - local: .\n      remote: /home/ubuntu/${project}\n\n    # 2. Sync your AWS credentials\n    - local: ~/.aws\n      remote: /home/ubuntu/.aws\n      ignore:\n        - \"cli/cache\" # Don't sync CLI cache junk\n</code></pre> <p>Usage: <pre><code>export AWS_PROFILE=dev-account\ncampers run\n# On remote: aws s3 ls (uses dev-account profile)\n</code></pre></p>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide will help you spin up your first Campers environment in under 5 minutes.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ol> <li>AWS Credentials: You need a valid AWS account.     <pre><code>aws configure\n# Or export AWS_PROFILE=my-profile\n</code></pre></li> <li> <p>Mutagen: Required for the high-performance file sync.</p> <ul> <li>macOS: <code>brew install mutagen-io/mutagen/mutagen</code></li> <li>Linux: Download binary</li> <li>Windows: <code>scoop install mutagen</code></li> </ul> </li> <li> <p>AWS Infrastructure (first-time only): Run the setup command to ensure your AWS account has the required infrastructure:     <pre><code>campers setup\n</code></pre>     This creates a default VPC if one doesn't exist and verifies IAM permissions.</p> </li> </ol>"},{"location":"getting-started/#installation","title":"Installation","text":"<p>We recommend using uv for a zero-install experience, but standard pip works too.</p> Using uv (Recommended)Using pip <p>No installation required! just run: <pre><code>uvx campers run\n</code></pre></p> <pre><code>pip install campers\n</code></pre>"},{"location":"getting-started/#your-first-camp","title":"Your First Camp","text":""},{"location":"getting-started/#1-initialize","title":"1. Initialize","text":"<p>Go to a project folder (or create a dummy one) and run:</p> <pre><code>campers init\n</code></pre> <p>This creates a <code>campers.yaml</code> file. This file is your Infrastructure as Code. It defines the machine you need.</p>"},{"location":"getting-started/#2-configure-optional","title":"2. Configure (Optional)","text":"<p>Open <code>campers.yaml</code>. By default, it uses a small <code>t3.medium</code>. Let's say you want more power:</p> <pre><code>defaults:\n  region: us-east-1\n  instance_type: t3.xlarge  # Upgrade to 4 vCPUs, 16GB RAM\n  disk_size: 50\n</code></pre>"},{"location":"getting-started/#3-run","title":"3. Run","text":"<pre><code>campers run\n</code></pre> <p>What happens next?</p> <ol> <li>Provisioning: Campers asks AWS for the instance.</li> <li>Sync: It establishes the Mutagen session.</li> <li>Shell: You are dropped into an SSH shell on the remote machine.</li> </ol>"},{"location":"getting-started/#4-the-localhost-experience","title":"4. The \"Localhost\" Experience","text":"<p>While inside the <code>campers run</code> session:</p> <ol> <li>Edit Locally: Open a file in your local VS Code. Save it.</li> <li>Check Remotely: Run <code>cat filename</code> in the remote shell. The change is already there.</li> <li>Web Apps: If you run a web server (e.g., <code>python -m http.server 8000</code>) on the remote machine, Campers automatically forwards the port. Open <code>http://localhost:8000</code> on your laptop.</li> </ol>"},{"location":"getting-started/#5-stop-or-destroy","title":"5. Stop or Destroy","text":"<p>When you are done, you have two choices:</p> <ul> <li>Stop (Ctrl+C or <code>campers stop</code>): Shuts down the instance. Data is preserved. You pay only for EBS storage (~$0.05/GB/month).</li> <li>Destroy (<code>campers destroy</code>): Terminates the instance and deletes the disk. Costs stop completely.</li> </ul>"},{"location":"getting-started/#pro-tip-configuration-with-ansible","title":"Pro Tip: Configuration with Ansible","text":"<p>Campers supports simple shell scripts (<code>setup_script</code>), but for robust environments, we recommend Ansible.</p> <p>Ansible is a popular tool for automating software installation. It is: - Idempotent: You can run it 100 times, and it only changes what needs to be changed. - Declarative: You say \"I want PostgreSQL installed,\" not \"How to install PostgreSQL.\"</p> <p>Example <code>campers.yaml</code> using Ansible:</p> <pre><code>playbooks:\n  web-server:\n    - name: Install Nginx\n      hosts: all\n      become: true\n      tasks:\n        - apt: {name: nginx, state: present}\n\ncamps:\n  web:\n    ansible_playbooks: [web-server]\n</code></pre>"},{"location":"getting-started/#optional-vs-code-remote-ssh","title":"Optional: VS Code Remote SSH","text":"<p>Campers is designed to let you edit locally while Mutagen syncs changes instantly. This gives you the fastest possible typing latency.</p> <p>However, if you prefer to use VS Code Remote - SSH (e.g., for the integrated terminal, remote debugging, or extensions that need to run on the host), you can still do so:</p> <ol> <li>Run <code>campers run</code>.</li> <li>Look at the SSH line in the TUI dashboard. It will show something like:     <pre><code>ssh -i /path/to/key.pem ubuntu@1.2.3.4\n</code></pre></li> <li>In VS Code, open the Remote Explorer.</li> <li>Add a new SSH Host using that exact command.</li> <li>Connect! You can now use the remote terminal and debugger directly.</li> </ol>"},{"location":"getting-started/#troubleshooting","title":"Troubleshooting","text":"<p>If you encounter issues, run the doctor command to diagnose common problems:</p> <pre><code>campers doctor\n</code></pre> <p>This checks AWS credentials, IAM permissions, VPC availability, and Mutagen installation. See Commands for details.</p>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Check out Examples for Data Science and Web Dev setups.</li> <li>Learn about Configuration variables and playbooks.</li> </ul>"}]}